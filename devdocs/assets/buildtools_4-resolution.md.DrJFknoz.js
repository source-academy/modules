import{_ as o,C as r,c as d,o as e,a2 as a,b as t,w as i,a as l,G as h,a3 as p}from"./chunks/framework.BYVJ-AET.js";const E=JSON.parse('{"title":"Bundle and Tab Resolution","description":"","frontmatter":{},"headers":[],"relativePath":"buildtools/4-resolution.md","filePath":"buildtools/4-resolution.md","lastUpdated":1768267948000}'),k={name:"buildtools/4-resolution.md"};function c(u,s,A,g,y,b){const n=r("Mermaid");return e(),d("div",null,[s[2]||(s[2]=a('<h1 id="bundle-and-tab-resolution" tabindex="-1">Bundle and Tab Resolution <a class="header-anchor" href="#bundle-and-tab-resolution" aria-label="Permalink to &quot;Bundle and Tab Resolution&quot;">​</a></h1><p>This page describes the process of how the buildtools determines what a valid bundle and what a valid tab is.</p><details class="details custom-block"><summary><code>modules.json</code></summary><p>If you&#39;ve been around for a while, you might remember that previously at the root of the module repository there was a file called <code>modules.json</code>. This JSON file contained the list of all bundles and tabs. Effectively, only if a bundle and tab was listed in that file would it be recognized as a valid bundle or tab.</p><p>This is no longer the case with the current repository structure. The buildtools determine what bundles and tabs are present so that developers do not need to configure <code>modules.json</code> themselves. So long as your bundle is correctly configured, it will be registered correctly.</p></details><h2 id="bundle-resolution" tabindex="-1">Bundle Resolution <a class="header-anchor" href="#bundle-resolution" aria-label="Permalink to &quot;Bundle Resolution&quot;">​</a></h2><p>A directory located in the <code>src/bundles</code> folder is considered a bundle if it has both a <code>package.json</code> and <code>manifest.json</code> file.</p><p>For each subdirectory located in <code>src/bundles</code>, the following process is executed:</p>',6)),(e(),t(p,null,{default:i(()=>[h(n,{id:"mermaid-23",class:"mermaid",graph:"graph%20TD%0A%20%20A%5BDoes%20it%20contain%20manifest.json%5D%0A%20%20B%5BIs%20the%20manifest%20valid%5D%0A%20%20C%5BReturn%20undefined%5D%0A%20%20D%5BReturn%20error%5D%0A%20%20E%5BShould%20execute%20tab%20check%3F%5D%0A%20%20F%5BDo%20all%20the%20specified%20tabs%20exist%3F%5D%0A%20%20G%5BRetrieve%20version%20from%20package.json%5D%0A%20%20H%5BCan%20the%20entry%20point%20be%20found%3F%5D%0A%0A%20%20A%20--%20yes%20--%3E%20B%0A%20%20A%20--%20no%20--%3E%20C%0A%0A%20%20B%20--%20yes%20--%3E%20E%0A%20%20B%20--%20no%20--%3E%20D%0A%0A%20%20F%20--%20yes%20--%3E%20G%0A%20%20F%20--%20no%20--%3E%20D%0A%0A%20%20E%20--%20yes%20--%3E%20F%0A%20%20E%20--%20no%20--%3E%20G%0A%0A%20%20G%20--%20If%20package.json%20does%20not%20exist%20--%3E%20D%0A%20%20G%20--%20No%20errors%20--%3E%20H%0A%0A%20%20H%20--%20yes%20--%3E%20I%5BReturn%20resolved%20bundle%5D%0A%20%20H%20--%20no%20--%3E%20D%0A"})]),fallback:i(()=>s[0]||(s[0]=[l(" Loading... ")])),_:1})),s[3]||(s[3]=a(`<p>Bundle resolution involves loading its manifest, determining its version and name, using the JSON schema to validate the manifest as well as checking the tabs specified in the manifest indeed do exist.</p><p><code>resolveSingleBundle</code> executes the resolution process and returns the following type:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Represents all the information about a bundle.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ResolvedBundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bundle&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * The name of this bundle</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * The </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">{</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BundleManifest</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">}</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> corresponding to this bundle</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  manifest</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BundleManifest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * The path to the directory that contains the bundle</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  directory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="resolveallbundles" tabindex="-1"><code>resolveAllBundles</code> <a class="header-anchor" href="#resolveallbundles" aria-label="Permalink to &quot;\`resolveAllBundles\`&quot;">​</a></h3><p><code>resolveAllBundles</code> is used to collate the manifests of every single bundle at once. If bundle(s) return an error during resolution, the resolution process will still proceed and the errors are collated together and returned at the end.</p><h2 id="tab-resolution" tabindex="-1">Tab Resolution <a class="header-anchor" href="#tab-resolution" aria-label="Permalink to &quot;Tab Resolution&quot;">​</a></h2><p>First, the above process is executed to retrieve all manifests from all bundles. From there, we can retrieve the names of every single tab that is supposed to be present.</p><p>For each tab name, it is assumed that a directory of that name exists under <code>src/tabs</code>. For each of those directories, the process below is executed:</p>`,8)),(e(),t(p,null,{default:i(()=>[h(n,{id:"mermaid-46",class:"mermaid",graph:"graph%20TD%0A%20%20A%5BDoes%20index.tsx%20exist%5D%0A%20%20B%5BDoes%20src%2Findex.tsx%20exist%5D%0A%20%20C%5BReturn%20undefined%5D%0A%20%20D%5BReturn%20resolved%20tab%5D%0A%0A%20%20A%20--%20yes%20--%3E%20D%0A%20%20A%20--%20no%20--%3E%20B%0A%0A%20%20B%20--%20yes%20--%3E%20D%0A%20%20B%20--%20no%20--%3E%20C%0A"})]),fallback:i(()=>s[1]||(s[1]=[l(" Loading... ")])),_:1})),s[4]||(s[4]=a(`<p>This process is also used when checking that the tabs specified the bundle manifest exist.</p><p><code>resolveSingleTab</code> used to perform tab resolution returns the following type:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Represents all the information about a tab</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ResolvedTab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;tab&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * The path to the directory that contains the tab</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  directory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * The path to the entry point file of the tab. This is either a \`index.tsx\` or \`src/index.tsx\`</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * file that is located in the tab&#39;s directory.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  entryPoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   * Name of the tab</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   */</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Because the entry point for a tab can be either <code>src/index.tsx</code> or <code>index.tsx</code>, we do need to store the tab&#39;s entry point.</p>`,4))])}const f=o(k,[["render",c]]);export{E as __pageData,f as default};
