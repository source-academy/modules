import{_ as r,C as n,c as i,o as a,a2 as s,b as l,w as o,a as d,G as m,a3 as h}from"./chunks/framework.BYVJ-AET.js";const _=JSON.parse('{"title":"Command Handlers","description":"","frontmatter":{},"headers":[],"relativePath":"buildtools/2-command.md","filePath":"buildtools/2-command.md","lastUpdated":1770448208000}'),p={name:"buildtools/2-command.md"};function c(u,e,b,f,C,g){const t=n("Mermaid");return a(),i("div",null,[e[1]||(e[1]=s('<h1 id="command-handlers" tabindex="-1">Command Handlers <a class="header-anchor" href="#command-handlers" aria-label="Permalink to &quot;Command Handlers&quot;">​</a></h1><p>Command Line parsing is handled by the <a href="https://github.com/tj/commander.js" target="_blank" rel="noreferrer"><code>commander</code></a> library.</p><h2 id="design-philosophy" tabindex="-1">Design Philosophy <a class="header-anchor" href="#design-philosophy" aria-label="Permalink to &quot;Design Philosophy&quot;">​</a></h2><p>The command handlers are kept in a separate folder from the builders. This allows us to test the command handlers separately from the builders by mocking the builder implementations.</p><p>Command execution follows the following steps:</p><ol><li>Command arguments from the user are parsed</li><li>The arguments are parsed to the corresponding builder</li><li>The builder returns a result object, which is formatted into a string</li><li>The formatted result is printed to the terminal</li><li><code>process.exit</code> is called with a non zero exit code if there were any errors present</li></ol><h2 id="ci-pipeline-compatibility" tabindex="-1">CI Pipeline Compatibility <a class="header-anchor" href="#ci-pipeline-compatibility" aria-label="Permalink to &quot;CI Pipeline Compatibility&quot;">​</a></h2><p>Since the buildtools need to be run as part of the CI pipeline, it is important that they return non-zero exit codes when appropriate so that the CI pipeline can detect that errors have occurred and halt the pipeline.</p><h2 id="command-execution-flow" tabindex="-1">Command Execution Flow <a class="header-anchor" href="#command-execution-flow" aria-label="Permalink to &quot;Command Execution Flow&quot;">​</a></h2><h3 id="single-bundle-tab" tabindex="-1">Single Bundle/Tab <a class="header-anchor" href="#single-bundle-tab" aria-label="Permalink to &quot;Single Bundle/Tab&quot;">​</a></h3><p>For a command that processes a single bundle or tab, this is the flow of the command:</p>',11)),(a(),l(h,null,{default:o(()=>[m(t,{id:"mermaid-57",class:"mermaid",graph:"graph%20TD%0A%20%20A%5BResolve%20bundle%2Ftab%5D%0A%20%20C%5B%22Run%20prebuilds%20(if%20necessary)%22%5D%0A%20%20B%5BRun%20Command%5D%0A%20%20D%5BCheck%20if%20running%20in%20CI%20Mode%5D%0A%20%20E%5BDisplay%20error%20and%20exit%20with%20code%201%5D%0A%20%20F%5BDisplay%20success%20message%5D%0A%0A%20%20A%20--%20Is%20resolved%20--%3E%20C%0A%20%20A%20--%20Is%20not%20resolved%20--%3E%20E%0A%0A%20%20C%20--%20No%20errors%20or%20warnings%20--%3E%20B%0A%20%20C%20--%20Warnings%20present%20--%3E%20D%0A%20%20C%20--%20Errors%20present%20--%3E%20E%0A%0A%20%20B%20--%20Warnings%20present%20--%3E%20D%0A%20%20B%20--%20Errors%20present%20--%3E%20E%0A%0A%20%20D%20--%20Is%20CI%20Mode%20--%3E%20E%0A%20%20D%20--%20Not%20CI%20Mode%20--%3E%20F%0A%20%20B%20--%20No%20errors%20or%20warnings%20--%3E%20F%0A"})]),fallback:o(()=>e[0]||(e[0]=[d(" Loading... ")])),_:1}))])}const E=r(p,[["render",c]]);export{_ as __pageData,E as default};
