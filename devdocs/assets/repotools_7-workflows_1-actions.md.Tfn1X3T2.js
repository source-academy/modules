import{_ as t,c as i,o,a2 as a}from"./chunks/framework.BYVJ-AET.js";const u=JSON.parse('{"title":"Custom Actions","description":"","frontmatter":{"title":"Custom Actions"},"headers":[],"relativePath":"repotools/7-workflows/1-actions.md","filePath":"repotools/7-workflows/1-actions.md","lastUpdated":1770501521000}'),n={name:"repotools/7-workflows/1-actions.md"};function c(s,e,r,l,h,d){return o(),i("div",null,e[0]||(e[0]=[a('<h1 id="custom-github-actions" tabindex="-1">Custom Github Actions <a class="header-anchor" href="#custom-github-actions" aria-label="Permalink to &quot;Custom Github Actions&quot;">​</a></h1><p>Github Actions does provide us the ability to write our own custom actions that can be integrated with the rest of the pipeline. This repository makes use of two:</p><ul><li>Initializer Action</li><li>Information Action</li></ul><p>Creating custom actions is detailed <a href="https://docs.github.com/en/actions/reference/workflows-and-actions/metadata-syntax" target="_blank" rel="noreferrer">here</a>. The convention for each action is have its metadata file (<code>action.yml</code>) in the same directory as its source code (if necessary).</p><h2 id="information-action-info-action-yml" tabindex="-1">Information Action (<code>info/action.yml</code>) <a class="header-anchor" href="#information-action-info-action-yml" aria-label="Permalink to &quot;Information Action (`info/action.yml`)&quot;">​</a></h2><p>The information action retrieves information about each package present in the repository, namely:</p><ul><li>Has this package changed relative to the master branch?</li><li>Name of the package</li><li>Directory of the package</li><li>Does the package require <code>playwright</code>?</li></ul><p>In the case of bundles or tabs, it also retrieves the name of the bundle or tab.</p><p>In case of changes to the lockfile, it also determines which packages need to be rebuilt. This can happen when dependencies of dependencies change, so no change is present in the package&#39;s source code itself, but the lockfile itself has changed.</p><p>This information is used by both the initializer action and the workflows to determine the what tasks need to be executed.</p><h2 id="initializer-action-init-action-yml" tabindex="-1">Initializer Action (<code>init/action.yml</code>) <a class="header-anchor" href="#initializer-action-init-action-yml" aria-label="Permalink to &quot;Initializer Action (`init/action.yml`)&quot;">​</a></h2><p>The initializer action combines the initialization steps that are necessary for each package:</p><ol><li>Enable <code>corepack</code></li><li>Install dependencies for that workspace (using <code>yarn workspaces focus</code>)</li><li>Install playwright if necessary (using <code>yarn playwright install --with-deps</code>)</li></ol><div class="info custom-block github-alert"><p class="custom-block-title">INFO</p><p>Though theoretically this action should also include <code>actions/checkout</code> since that action is repeated across the different packages, because the initializer action is a custom action, the code for the action needs to be checked out before this action can be run.</p><p>Thus, the initializer action has to run <em>after</em> <code>actions/checkout</code> has completed and so it has to be a separate step.</p></div>',14)]))}const f=t(n,[["render",c]]);export{u as __pageData,f as default};
